<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DIAMOND - Login</title>
    <!-- Incluindo Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Incluindo Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <script>
      // Configuração do Tailwind para o modo escuro
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              // Paleta Light
              'light-bg': '#FFFFFF',
              'light-bg-secondary': '#F0F5F8',
              'light-text': '#333333',
              'light-text-secondary': '#666666',
              'light-border': '#D1D5DB',

              // Paleta Dark
              'dark-bg': '#1A1A1A',
              'dark-bg-secondary': '#2C2C2C',
              'dark-text': '#E0E0E0',
              'dark-text-secondary': '#A0A0A0',
              'dark-border': '#4A4A4A',

              // Cor de Destaque (Accent)
              accent: '#3B82F6',
              'accent-hover': '#2563EB',
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="bg-light-bg dark:bg-dark-bg font-sans transition-colors duration-300"
  >
    <div class="flex min-h-screen">
      <!-- Coluna do Formulário -->
      <div
        class="w-full lg:w-1/2 flex flex-col justify-center items-center p-8 sm:p-12"
      >
        <div class="w-full max-w-md">
          <!-- Logo -->
          <div class="mb-8 text-left">
            <h1 class="text-2xl font-bold text-light-text dark:text-dark-text">
              DIAMOND
            </h1>
          </div>

          <!-- Título -->
          <h2
            class="text-3xl font-bold text-light-text dark:text-dark-text mb-2"
          >
            Login
          </h2>
          <p
            class="text-light-text-secondary dark:text-dark-text-secondary mb-8"
          >
            Por favor, insira os seus dados para continuar.
          </p>

          <!-- Formulário -->
          <form action="#" id="login-form">
            <div class="mb-4">
              <label
                for="email"
                class="block text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-2"
                >Email</label
              >
              <input
                type="email"
                id="email"
                class="w-full py-3 px-4 rounded-lg border border-light-border dark:border-dark-border bg-light-bg-secondary dark:bg-dark-bg-secondary text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-accent"
                placeholder="voce@email.com"
                required
              />
            </div>
            <div class="mb-4">
              <label
                for="password"
                class="block text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-2"
                >Palavra-passe</label
              >
              <input
                type="password"
                id="password"
                class="w-full py-3 px-4 rounded-lg border border-light-border dark:border-dark-border bg-light-bg-secondary dark:bg-dark-bg-secondary text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-accent"
                placeholder="••••••••"
                required
              />
            </div>
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center">
                <input
                  type="checkbox"
                  id="remember"
                  class="h-4 w-4 rounded border-gray-300 text-accent focus:ring-accent"
                />
                <label
                  for="remember"
                  class="ml-2 block text-sm text-light-text-secondary dark:text-dark-text-secondary"
                  >Lembrar-me</label
                >
              </div>
              <a
                href="#"
                class="text-sm font-medium text-accent hover:underline"
                >Esqueceu-se da palavra-passe?</a
              >
            </div>
            <button
              type="submit"
              class="w-full bg-accent text-white py-3 rounded-lg font-semibold hover:bg-accent-hover transition-colors"
            >
              Login
            </button>
          </form>

          <!-- Link de Cadastro -->
          <p
            class="text-center text-sm text-light-text-secondary dark:text-dark-text-secondary mt-8"
          >
            Não tem uma conta?
            <a href="#" class="font-medium text-accent hover:underline"
              >Crie uma conta</a
            >
          </p>

          <!-- Dica Financeira do Dia - Gemini API -->
          <div
            class="mt-8 pt-6 border-t border-light-border dark:border-dark-border"
          >
            <h3
              class="text-center text-sm font-semibold text-light-text dark:text-dark-text mb-2"
            >
              ✨ Dica Financeira do Dia
            </h3>
            <p
              id="financial-tip"
              class="text-center text-sm text-light-text-secondary dark:text-dark-text-secondary h-12 flex items-center justify-center"
            >
              A carregar dica...
            </p>
          </div>
        </div>
      </div>

      <!-- Coluna da Ilustração -->
      <div
        class="hidden lg:flex w-1/2 bg-light-bg-secondary dark:bg-dark-bg-secondary items-center justify-center p-12"
      >
        <div class="w-full max-w-lg">
          <!-- Ilustração SVG -->
          <svg viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop
                  offset="0%"
                  style="stop-color: #3b82f6; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #60a5fa; stop-opacity: 1"
                />
              </linearGradient>
            </defs>
            <g class="transition-all duration-300">
              <!-- Nuvem de fundo -->
              <path
                class="fill-current text-gray-200 dark:text-gray-700"
                d="M 100,250 C 50,250 50,200 100,200 C 100,150 150,150 150,200 C 200,200 200,250 150,250 Z"
                transform="translate(100, -50) scale(1.8)"
              />
              <path
                class="fill-current text-gray-200 dark:text-gray-700 opacity-60"
                d="M 100,250 C 50,250 50,200 100,200 C 100,150 150,150 150,200 C 200,200 200,250 150,250 Z"
                transform="translate(-20, 20) scale(1.3)"
              />

              <!-- Elemento central (servidor/dados) -->
              <rect
                x="150"
                y="120"
                width="200"
                height="180"
                rx="20"
                ry="20"
                fill="url(#grad1)"
                class="shadow-lg"
              />
              <circle
                cx="250"
                cy="210"
                r="50"
                class="fill-current text-white opacity-10"
              />
              <circle
                cx="250"
                cy="210"
                r="30"
                class="fill-current text-white opacity-20"
              />

              <!-- Linhas de dados -->
              <path
                d="M 180 170 C 220 150, 280 150, 320 170"
                stroke-width="6"
                stroke-linecap="round"
                class="stroke-current text-white opacity-50 fill-none"
              />
              <path
                d="M 180 210 C 210 200, 290 220, 320 210"
                stroke-width="6"
                stroke-linecap="round"
                class="stroke-current text-white opacity-50 fill-none"
              />
              <path
                d="M 180 250 C 230 270, 270 270, 320 250"
                stroke-width="6"
                stroke-linecap="round"
                class="stroke-current text-white opacity-50 fill-none"
              />

              <!-- Engrenagem flutuante -->
              <g transform="translate(90, 100) rotate(-15)">
                <path
                  d="M 25 10 L 25 2 C 25 2 28 0 30 2 L 35 7 C 37 9 40 6 41 4 L 47 6 C 49 7 48 10 46 11 L 41 15 C 39 17 41 20 43 21 L 45 27 C 46 29 43 30 41 30 L 35 25 C 33 23 30 26 28 28 L 29 34 C 30 36 27 37 25 36 L 19 31 C 17 29 14 31 12 33 L 7 34 C 5 35 4 32 5 30 L 9 25 C 11 23 8 20 7 18 L 6 12 C 5 10 8 9 10 9 L 16 13 C 18 15 21 12 23 10 Z"
                  class="fill-current text-gray-300 dark:text-gray-600"
                />
                <circle cx="25" cy="20" r="5" fill="url(#grad1)" />
              </g>
            </g>
          </svg>
        </div>
      </div>
    </div>

    <!-- Botão para Trocar Tema -->
    <button
      id="theme-toggle"
      class="fixed bottom-5 right-5 p-3 rounded-full bg-light-bg-secondary dark:bg-dark-bg-secondary shadow-lg border border-light-border dark:border-dark-border"
    >
      <!-- Ícone de Sol -->
      <svg
        id="theme-toggle-light-icon"
        class="w-6 h-6 text-light-text dark:text-dark-text hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
        ></path>
      </svg>
      <!-- Ícone de Lua -->
      <svg
        id="theme-toggle-dark-icon"
        class="w-6 h-6 text-light-text dark:text-dark-text"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
        ></path>
      </svg>
    </button>

    <script>
      // Lógica para alternar o tema
      const themeToggleBtn = document.getElementById('theme-toggle');
      const lightIcon = document.getElementById('theme-toggle-light-icon');
      const darkIcon = document.getElementById('theme-toggle-dark-icon');

      // Função para aplicar o tema
      const applyTheme = (isDark) => {
        if (isDark) {
          document.documentElement.classList.add('dark');
          lightIcon.classList.remove('hidden');
          darkIcon.classList.add('hidden');
        } else {
          document.documentElement.classList.remove('dark');
          lightIcon.classList.add('hidden');
          darkIcon.classList.remove('hidden');
        }
      };

      // Verifica o tema salvo no localStorage ou a preferência do sistema
      const isDarkMode =
        localStorage.getItem('color-theme') === 'dark' ||
        (!('color-theme' in localStorage) &&
          window.matchMedia('(prefers-color-scheme: dark)').matches);

      applyTheme(isDarkMode);

      themeToggleBtn.addEventListener('click', () => {
        const isDark = document.documentElement.classList.contains('dark');
        localStorage.setItem('color-theme', isDark ? 'light' : 'dark');
        applyTheme(!isDark);
      });

      /**
       * Funcionalidade da API Gemini para gerar dicas financeiras.
       */
      async function generateFinancialTip() {
        const tipElement = document.getElementById('financial-tip');
        if (!tipElement) return;

        tipElement.textContent = 'A gerar uma nova dica para si...';

        // A chave da API é deixada em branco, pois será fornecida pelo ambiente de execução.
        const apiKey = '';
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        const prompt =
          'Aja como um consultor financeiro. Forneça uma dica de finanças pessoais curta, útil e acionável em português de Portugal. A dica deve ter no máximo 150 caracteres e ser motivadora.';

        try {
          const response = await fetch(apiUrl, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              contents: [
                {
                  parts: [
                    {
                      text: prompt,
                    },
                  ],
                },
              ],
            }),
          });

          if (!response.ok) {
            throw new Error(`API error: ${response.status}`);
          }

          const data = await response.json();
          // Extrai o texto da resposta da API
          if (
            data.candidates &&
            data.candidates.length > 0 &&
            data.candidates[0].content.parts &&
            data.candidates[0].content.parts.length > 0
          ) {
            const tipText = data.candidates[0].content.parts[0].text;
            tipElement.textContent = tipText.trim();
          } else {
            throw new Error('Resposta da API inválida.');
          }
        } catch (error) {
          console.error('Erro ao buscar dica financeira:', error);
          // Fornece uma dica padrão em caso de erro na API
          tipElement.textContent =
            'Crie um orçamento mensal para acompanhar as suas receitas e despesas. Ajuda a identificar para onde vai o seu dinheiro.';
        }
      }

      // Chamar a função para gerar a dica quando a página carregar
      window.addEventListener('load', generateFinancialTip);
    </script>
  </body>
</html>

